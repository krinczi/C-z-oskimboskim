<Window x:Class="POMIDOR.Views.AnalyticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Analiza efektywności" Width="980" Height="640" WindowStartupLocation="CenterOwner"
        Background="#FFF6F7F9">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <StackPanel Orientation="Horizontal" Grid.Row="0">
            <TextBlock Text="Okres:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <Button Content="Dzień" Width="100" Height="32" Margin="0,0,6,0" Click="Day_Click"/>
            <Button Content="Tydzień" Width="100" Height="32" Margin="0,0,6,0" Click="Week_Click"/>
            <Button Content="Miesiąc" Width="100" Height="32" Margin="0,0,6,0" Click="Month_Click"/>

            <TextBlock Text="   Data odniesienia:" VerticalAlignment="Center" Margin="12,0,6,0"/>
            <DatePicker x:Name="AnchorPicker" SelectedDate="{Binding AnchorDate, Mode=TwoWay}" Width="150"/>
            <Button Content="Przelicz" Width="100" Height="32" Margin="6,0,0,0" Click="Recompute_Click"/>

            <Button Content="Generuj raport" Width="140" Height="32" Margin="16,0,0,0" Click="Export_Click"/>
        </StackPanel>

        <!-- Stat cards -->
        <UniformGrid Grid.Row="1" Rows="1" Columns="5" Margin="0,12,0,12">
            <Border Padding="12" Background="White" CornerRadius="8" Margin="6" >
                <StackPanel>
                    <TextBlock Text="Ukończone zadania" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Stats.CompletedTasks}" FontSize="20" FontWeight="Bold"/>
                </StackPanel>
            </Border>
            <Border Padding="12" Background="White" CornerRadius="8" Margin="6" >
                <StackPanel>
                    <TextBlock Text="Ukończone sub-taski" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Stats.CompletedSubTasks}" FontSize="20" FontWeight="Bold"/>
                </StackPanel>
            </Border>
            <Border Padding="12" Background="White" CornerRadius="8" Margin="6" >
                <StackPanel>
                    <TextBlock Text="% realizacji celów" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Stats.GoalsCompletionPct, StringFormat={}{0:F1}%}" FontSize="20" FontWeight="Bold"/>
                </StackPanel>
            </Border>
            <Border Padding="12" Background="White" CornerRadius="8" Margin="6" >
                <StackPanel>
                    <TextBlock Text="Pomodoro [min]" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Stats.PomodoroMinutes}" FontSize="20" FontWeight="Bold"/>
                </StackPanel>
            </Border>
            <Border Padding="12" Background="White" CornerRadius="8" Margin="6" >
                <StackPanel>
                    <TextBlock Text="Zaległe zadania" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Stats.OverdueTasks}" FontSize="20" FontWeight="Bold"/>
                </StackPanel>
            </Border>
        </UniformGrid>

        <!-- Charts -->
        <Border Grid.Row="2" Background="White" CornerRadius="8" Padding="8" Margin="0,0,0,12">
            <oxy:PlotView Model="{Binding CompletedTasksModel}"/>
        </Border>

        <Border Grid.Row="3" Background="White" CornerRadius="8" Padding="8">
            <oxy:PlotView Model="{Binding PomodoroModel}"/>
        </Border>
    </Grid>
</Window>
